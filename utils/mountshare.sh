#!/bin/sh
# Reference   : https://docs.vmware.com/en/VMware-Workstation-Pro/17/com.vmware.ws.using.doc/GUID-AB5C80FE-9B8A-4899-8186-3DB8201B1758.html
# Description : This script mounts a shared folder from the host OS to a specified target folder on the guest VM
#               using vmhgfs-fuse (a.k.a. VMWare Workstation)

# Ensure both source and destination are provided
if [ "$#" -ne 2 ]; then
  echo "Usage: $0 <source> <destination>"
  echo "e.g. mountshare WINPREP /mnt/WINPREP # Mounts Windows host shared folder to Linux guest VM"
  exit 1
fi

source=$1
destination=$2

# Mount the shared folder
/usr/bin/vmhgfs-fuse .host:/${source} /mnt/${destination} -o subtype=vmhgfs-fuse,allow_other

# List the contents of the target folder
ls -la /mnt/${destination}
