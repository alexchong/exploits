#!/bin/sh
# Description: Helper script to find and display files or search for a specific string in files.

# Check if at least one argument is provided
if [ -z "$1" ]; then
  echo "Usage: $0 [path] [search_string]"
  exit 1
fi

# Set the path to the first argument
TARGET_PATH=$1

# Set the search string to the second argument if provided
SEARCH_STRING=$2

# Check if the provided path exists and is a directory
if [ ! -d "$TARGET_PATH" ]; then
  echo "Error: $TARGET_PATH is not a valid directory."
  exit 1
fi

# Check if a search string is provided
if [ -n "$SEARCH_STRING" ]; then
  # Find files containing the search string and display them
  find "$TARGET_PATH" -type f -exec sh -c 'grep -q "$0" "{}" && echo "==========> {}" && grep "$0" "{}" && echo "\n"' "$SEARCH_STRING" \; 2>/dev/null
else
  # Find and display the content of each file in the specified directory
  find "$TARGET_PATH" -type f -exec sh -c 'echo "========== {}" && cat "{}" && echo "\n"' \; 2>/dev/null
fi
