#!/usr/bin/sh
# Description: Uses 'find' to stdout each file of target directory

# Function to display usage
usage() {
  echo "Usage: $0 [path] [-h]"
  exit 0
}

# Check for the -h flag to display usage
if [ "$1" == "-h" ]; then
  usage
fi

# Set the path to the current directory or the provided argument
TARGET_PATH=${1:-$(pwd)}

# Check if the provided path exists and is a directory
if [ ! -d "$TARGET_PATH" ]; then
  echo "Error: $TARGET_PATH is not a valid directory."
  exit 1
fi

# Find and display the content of each file in the specified directory
find "$TARGET_PATH" -type f -exec sh -c 'echo "========== {}" && cat "{}" && echo "\n"' \; 2>/dev/null
